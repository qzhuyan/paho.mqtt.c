node {
  name = "emqx@127.0.0.1"
  cookie = "emqxsecretcookie"
  data_dir = "data"
}

cluster {
  name = emqxcl
  discovery_strategy = manual
}


listeners.tcp.default {
  enabled = false
}

listeners.wss.default {
  enabled = false
}

# Regular Listener for *sample* code
listeners.quic.default {
  enabled = true
  bind = ":14567"
  max_connections = infinity
  peer_bidi_stream_count = 1024
  keep_alive_interval_ms = 0
  ssl_options:
  {
    keyfile = "etc/certs/key.pem"
    certfile = "etc/certs/cert.pem"
    cacertfile = "etc/certs/cacert.pem"
  }
}

# listener for mutual authentication
listeners.quic.mtls {
  enabled = true
  bind = ":18884"
  max_connections = infinity
  peer_bidi_stream_count = 1024
  keep_alive_interval_ms = 0
  ssl_options:
  {
    verify = verify_peer
    keyfile = "etc/certs/key.pem"
    certfile = "etc/certs/cert.pem"
    cacertfile = "etc/certs/cacert.pem"
  }
}

# server authentication - no client authentication
# also used for big message test
listeners.quic.verify_server {
  enabled = true
  bind = ":18885"
  acceptors = 32
  max_connections = infinity
  peer_bidi_stream_count = 1024
  keep_alive_interval_ms = 0
  ssl_options:
  {
    verify = verify_none
    keyfile = "etc/certs/key.pem"
    certfile = "etc/certs/cert.pem"
    cacertfile = "etc/certs/cacert.pem"
  }
}

# anon_connection
listeners.quic.annon {
  enabled = true
  bind = ":18886"
  max_connections = infinity
  peer_bidi_stream_count = 1024
  keep_alive_interval_ms = 0
  ssl_options:
  {
    verify = verify_none
    keyfile = "etc/certs/key.pem"
    certfile = "etc/certs/cert.pem"
    cacertfile = "etc/certs/cacert.pem"
  }
}

# yet another UDP listener for negative cases.
gateway.mqttsn.listeners.udp.default.bind = ":18883"

# Followings are required for large message test
mqtt.max_packet_size = 100MB
force_shutdown.enable = false
